<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Member Giving</title>
  <link rel="stylesheet " type="text/css" href="/cfms-web/css/style2.css">
  <link rel="stylesheet" type="text/css" href="/cfms-web/css/table_offering.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" type="text/css">
  <style>
    #identifier-option-head{
        border:none;
    }

    #identifier-option, #identifier-option1{
        border:none;
    }
    .details table td{
      padding: 2px;
  }

</style>
</head>
<body>
<div class="container">
  <div class="navigation">
    <ul>
      <li>
        <a th:href="@{statement2(p=${Phone},q=${Password})}">
          <span class="icon"><ion-icon name="home-outline"></ion-icon></span>
          <span class="icon" >Home</span>
        </a>
      </li>
      <li>
        <a id="myBtn">
          <span class="icon"><ion-icon name="log-in-outline"></ion-icon></span>
          <span class="title">Personnel Login</span>
        </a>
      </li>

      <li>
        <a th:href="@{offering(p=${Phone},q=${Password})}">
          <span class="icon"><ion-icon name="cash-outline"></ion-icon></span>
          <span class="title">Offerings</span>
        </a>
      </li>
      <li>
        <a th:href="@{profile2(p=${Phone},q=${Password})}">
          <span class="icon"><ion-icon name="person-outline"></ion-icon></span>
          <span class="title">Profile</span>
        </a>
      </li>
      <li>
        <a th:href="@{statement2(p=${Phone},q=${Password})}">
          <span class="icon"><ion-icon name="podium-outline"></ion-icon></span>
          <span class="title">Statements</span>
        </a>
      </li>
      <li>
        <a href="#">
          <span class="icon"><ion-icon name="cog-outline"></ion-icon></span>
          <span class="title">Support Options</span>
        </a>
      </li>
      <li>
        <a th:href="@{/authenticate/login}">
          <span class="icon"><ion-icon name="log-out-outline"></ion-icon></span>
          <span class="title">Sign Out</span>
        </a>
      </li>
    </ul>
  </div>
  <!-- main -->
  <div class="main">
    <div class="topbar">
      <div class="toggle">
        <ion-icon name="menu-outline" id="toggle_button"></ion-icon>
      </div>

      <!-- Search -->
      <div class="search">
        <h1 style="font-size:16px;">Member Giving</h1>
      </div>

      <!-- userImg -->
      <div class="user">
        <img src="/cfms-web/images/cfmsLogo.png">
      </div>
    </div>

    <input type="hidden" id="mobile_number" th:value="${phone}">
    <input type="hidden" id="user_pin" th:value="${pin}">
    <input type="hidden" id="personal_no" name="personal_no" th:value="${personal_no}">
    <input type="hidden" id="personal_no2" name="personal_no2" th:value="${personal_no2}">
    <input type="hidden" id="personal_pin" name="personal_pin" th:value="${personal_pin}">
    <input type="hidden" id="cfms_member_name" name="cfms_member_name" th:value="${cfms_member_name}">
    <input type="hidden" id="cfms_member_number" name="cfms_member_number" th:value="${cfms_member_number}">
    <input type="hidden" id="church_code_mine" name="church_code_mine" th:value="${church_code}">
    <input type="hidden" id="church_name_mine" name="church_name_mine" th:value="${church_name}">
    <p id="member_number_id" style="display:none;"></p>
    <p id="member_name_id" style="display:none;"></p>
    <!-- Order Details List -->
    <div class="details">
      <div class="recentOrders">
        <div id="member_giving">
          <div class="cardHeader">
            <h2 style="text-align:center;">Giving Offerings</h2>
            <div class="responseDiv" style="display:none;"></div>
          </div>
          <br>
          <hr>
          <table width="100%">
            <thead>
            <tr>
              <td>Where to Contribute?</td>
            </tr>
            <tr>
              <td><input class="form-check-input" type="radio" name="flexRadioDefault" id="home_church">
                <label>
                  Home Church
                </label>
              </td>
              <td><input class="form-check-input" type="radio" name="flexRadioDefault" id="host_church">
                <label class="form-check-label">
                  Host Church
                </label></td>
            </tr>
            <tr>
              <td>Whom to Contribute For?</td>
            </tr>
            <tr>
              <td><input class="form-check-input" type="radio" name="flexRadioDefault2" id="self">
                <label>
                  Self
                </label></td>
              <td>
                <input class="form-check-input" type="radio" name="flexRadioDefault2" id="others">
                <label class="form-check-label">
                  Others
                </label>
              </td>
            </tr>
            </thead>
            <tbody>
            <tr>

            <tr>
              <td><button type="button" class="btn" onclick="myFunction()">Proceed</button></td>
              </td>
            </tr>
            </tbody>
          </table>
        </div>

        <div id="home_church_self" style="display:none;">
          <div class="cardHeader">
            <h2 style="text-align:center;margin-top:10px;">Giving Offerings</h2>
            <div class="responseDiv" style="display:none;"></div>
          </div>
          <br>
          <hr>
          <table>
            <tbody>
            <tr>
              <td><b> To: </b></td>
              <td align="left"><input type="text" id="church_name" name="church_name" readonly></td>
              <td><b> For: </b></td>
              <td><input type="text" id="member_name" name="member_name" readonly></td>
            </tr>
            <tr>
              <td colspan="4" style="padding-top:10px;"><b>Select Fund Type</b></td>
            </tr>
            <tr>
              <td>
                <input class="form-check-input" type="radio" name="flexRadioDefault3" id="trust_funds">
                <label class="form-check-label" for="trust_funds">
                  Trust Funds
                </label>
              </td>
            </tr>
            <tr>
              <td colspan="2">
                <input class="form-check-input" type="radio" name="flexRadioDefault3" id="non_trust_funds">
                <label class="form-check-label" for="non_trust_funds">
                  Non Trust Funds
                </label>
              </td>
            </tr>
            <tr>
              <td>
                <input class="form-check-input" type="radio" name="flexRadioDefault3" id="both_funds">
                <label class="form-check-label" for="both_funds">
                  Both Funds
                </label>
              </td>
            </tr>
            <tr>
              <td colspan="2">
                <input class="form-check-input" type="radio" name="flexRadioDefault3" id="special_trust_funds">
                <label class="form-check-label" for="special_trust_funds">
                  Special Trust Funds
                </label>
              </td>
            </tr>
            <tr>
              <td><button type="button" class="btn" onclick="goBackToHomePage()">Back</button>
                <button type="button" class="btn" onclick="getFundAccount()">Proceed</button></td>
            </tr>
            </tbody>
          </table>
        </div>

        <div id="church_code_section_self" style="display:none;">
          <div class="cardHeader">
            <h2 style="text-align:center;margin-top:10px;">Enter Host Church Code</h2>
            <div class="responseDiv" style="display:none;"></div>
          </div>
          <br>
          <hr>
          <table>
            <tbody>
            <tr>
              <td><input type="text" id="church_code_host" min="5" max="5" name="church_code_host" placeholder="Church Code" style="width:50%;"></td>
            </tr>
            <td>
              <td><button type="button" class="btn" onclick="goBackToHomePage()">Back</button>
              <button type="button" class="btn" onclick="getChurchCode()">Submit</button></td>
            </tr>
            </tbody>
          </table>
        </div>


        <div id="church_code_section_others" style="display:none;">
          <div class="cardHeader">
            <h2 style="text-align:center;margin-top:10px;">Enter Host Church Code</h2>
            <div class="responseDiv" style="display:none;"></div>
          </div>
          <br>
          <hr>
          <table>
            <tbody>
            <tr>
              <td><input type="text" id="church_code_others" min="5" max="5" name="church_code_others" placeholder="Church Code" style="width:50%;"></td>
            </tr>
            <td>
              <td><button type="button" class="btn" onclick="goBackToHomePage()">Back</button>
                <button type="button" class="btn" onclick="getChurchCodeOthers()">Submit</button></td>
            </tr>
            </tbody>
          </table>
        </div>

        <div id="host_church_self" style="display:none;">
          <div class="cardHeader">
            <h2 style="text-align:center;margin-top:10px;">Giving Offerings</h2>
            <div class="responseDiv" style="display:none;"></div>
          </div>
          <br>
          <hr>
          <table>
            <tbody>
            <tr>
              <td><b> To: </b></td>
              <td><input type="text" id="church_name1" name="church_name1"></td>
              <td><b> For: </b></td>
              <td><input type="text" id="member_name1" name="member_name1" readonly></td>
            </tr>
            <tr>
              <td colspan="4" style="padding-top:10px;"><b>As who would you like to give?</b></td>
            </tr>
            <tr>
              <td colspan="2">
                <input class="form-check-input" type="radio" name="flexRadioDefault4" id="visiting_member">
                <label class="form-check-label" for="visiting_member">
                  Visiting Member
                </label>
              </td>
            </tr>
            <tr>
              <td style="text-align:left;">
                <input class="form-check-input" type="radio" name="flexRadioDefault4" id="guest">
                <label class="form-check-label" for="guest">
                  Guest
                </label>
              </td>
            </tr>
            <tr>
              <td>
                <input class="form-check-input" type="radio" name="flexRadioDefault4" id="anonymous">
                <label class="form-check-label" for="anonymous">
                  Anonymous
                </label>
              </td>
            </tr>
            <tr>
              <td><button type="button" class="btn" onclick="getOfferingPage()">Confirm</button></td>
            </tr>
            </tbody>
          </table>
        </div>
        <div id="home_church_others" style="display:none;">
          <div class="cardHeader">
            <h2 style="text-align:center;margin-top:10px;margin-bottom:10px">Giving Offerings</h2>
            <div class="responseDiv" style="display:none;"></div>
          </div>
          <br>
          <hr>
          <table>
            <tbody>
            <tr>
              <td><label class="label_input"><b> To: </b></label></td>
              <td><input type="text" id="church_name_home" name="church_name_home" readonly></td>
            </tr>
            <tr>
              <td colspan="2"><label class="label_input"><b>Select Others</b></label></td>
            </tr>
            <td>
              <input class="form-check-input" type="radio" name="flexRadioDefault5" id="other_member" onclick="otherMember()">
              <label class="form-check-label" for="trust_funds">
                Other Member
              </label>
            </td>
            </tr>
            <tr>
              <td>
                <input class="form-check-input" type="radio" name="flexRadioDefault5" id="group" onclick="otherMember()">
                <label class="form-check-label" for="non_trust_funds">
                  Group
                </label>
              </td>
            </tr>
            <tr>
              <td>
                <input class="form-check-input" type="radio" name="flexRadioDefault5" id="family" onclick="otherMember()">
                <label class="form-check-label" for="both_funds">
                  Family
                </label>
              </td>
            </tr>
            <tr>
              <td>
                <input class="form-check-input" type="radio" name="flexRadioDefault5" id="department" onclick="otherMember()">
                <label class="form-check-label" for="special_trust_funds">
                  Department
                </label>
              </td>
            </tr>
            <tr>
              <td>
                <input class="form-check-input" type="radio" name="flexRadioDefault5" id="institution" onclick="otherMember()">
                <label class="form-check-label" for="special_trust_funds">
                  Institution
                </label>
              </td>
            </tr>
            <tr id="identifier-option-head">
              <td><label class="label_input"><b>Identify Member by</b></label></td>
            </tr>
            <tr id="identifier-option">
              <td>
                <input class="form-check-input" type="radio" name="flexRadioDefault6" id="phone_number" onclick="showIdentifier()">
                <label class="form-check-label" for="special_trust_funds">
                  Phone Number
                </label>
              </td>
            </tr>
            <tr id="identifier-option1">
              <td>
                <input class="form-check-input" type="radio" name="flexRadioDefault6" id="cfms_id" onclick="showIdentifier()">
                <label class="form-check-label" for="special_trust_funds">
                  CFMS ID
                </label>
              </td>
            </tr>
            <tr id="identify_member_only" style="margin-top:10px;">
              <td id="cfms_id_input" style="padding-top:10px;">
                <label class="label_input" for="cfms_id_input"><b>Member CFMS ID(Case Specific)</b></label>
                <input type="text" id="cfms_id_member" name="churchCode" placeholder="AB1234">
              </td>
              <td id="associated_phone_number" style="padding-top:10px;">
                <label class="label_input" for="phone1"><b>Associated Phone Number</b></label>
                <input type="text" id="phone1" name="churchCode" placeholder="+254" >
              </td>
            </tr>
            <tr>
              <td><button type="button" class="btn" onclick="goBackToHomePage()">Back</button>
                <button type="button" class="btn" onclick="submitHomeOthers()">Submit</button></td>
            </tr>
            </tbody>
          </table>

        </div>

        <div id="host_church_others" style="display:none;">
          <div class="cardHeader">
            <h2 style="text-align:center;margin-top:10px;margin-bottom:10px">Giving Offerings</h2>
            <div class="responseDiv" style="display:none;"></div>
          </div>
          <br>
          <hr>
          <table style="border:none;">
            <tr>
              <td><label class="label_input"><b> To: </b></label></td>
              <td><input type="text" id="church_name_others" name="church_name_others" readonly></td>
            </tr>
            <tr>
              <td colspan="2"><label class="label_input"><b>Select Others</b></label></td>
            </tr>
            <td>
              <input class="form-check-input" type="radio" name="flexRadioDefault7" id="other_member1" onclick="otherMember1()">
              <label class="form-check-label" for="trust_funds">
                Other Member
              </label>
            </td>
            </tr>
            <tr>
              <td>
                <input class="form-check-input" type="radio" name="flexRadioDefault7" id="group1" onclick="otherMember1()">
                <label class="form-check-label" for="non_trust_funds">
                  Group
                </label>
              </td>
            </tr>
            <tr>
              <td>
                <input class="form-check-input" type="radio" name="flexRadioDefault7" id="family1" onclick="otherMember1()">
                <label class="form-check-label" for="both_funds">
                  Family
                </label>
              </td>
            </tr>
            <tr>
              <td>
                <input class="form-check-input" type="radio" name="flexRadioDefault7" id="department1" onclick="otherMember1()">
                <label class="form-check-label" for="special_trust_funds">
                  Department
                </label>
              </td>
            </tr>
            <tr>
              <td>
                <input class="form-check-input" type="radio" name="flexRadioDefault7" id="institution1" onclick="otherMember1()">
                <label class="form-check-label" for="special_trust_funds">
                  Institution
                </label>
              </td>
            </tr>
            <tr id="identify_by1">
              <td><label class="label_input"><b>Identify Member by</b></label></td>
            </tr>
            <tr id="phone_number_div">
              <td>
                <input class="form-check-input" type="radio" name="flexRadioDefault8" id="phone_number1" onclick="showIdentifier1()">
                <label class="form-check-label" for="special_trust_funds">
                  Phone Number
                </label>
              </td>
            </tr>
            <tr id="cfms_member_div">
              <td>
                <input class="form-check-input" type="radio" name="flexRadioDefault8" id="cfms_id1" onclick="showIdentifier1()">
                <label class="form-check-label" for="special_trust_funds">
                  CFMS ID
                </label>
              </td>
            </tr>
            <tr id="identify_member_only1" style="margin-top:10px;">
              <td id="cfms_id_input1" style="padding-top:10px;">
                <label class="label_input" for="cfms_id1"><b>Member CFMS ID(Case Specific)</b></label>
                <input type="text" id="cfms_id2" name="churchCode" placeholder="AB1234">
              </td>
              <td id="associated_phone_number1" style="padding-top:10px;">
                <label class="label_input" for="phone1"><b>Associated Phone Number</b></label>
                <input type="text" id="phone2" name="churchCode" placeholder="+254" >
              </td>
            </tr>
            <tr>
              <td><button type="button" class="btn">Submit</button></td>
            </tr>
          </table>

        </div>
        <div id="trust_funds_div"></div>
        <div id="payment_div" style="display:none;"></div>
        <div id="line" style="display:none;"><hr><br></div>
        <div id="paybill_div" style="display: none;">
          <br>
          <div>
            <p>If you do not receive the MPESA prompt, Open your MPESA Menu and make the following paybill Transaction</p>
            <br><p id="paybill_number">Paybill Number : 4038047</p>
            <p id="cfms_transaction_number">Account Number : 12664143</p>
          </div>
        </div>

      </div>
      <div class="recentCustomers">
        <br>
        <hr>
        <div id="about_app">
          <div class="cardHeader">
            <h2 style="text-align:center;margin-top:10px;">About App</h2>
          </div>
          <table width="100%">
            <tbody>
            <tr>
              <td><ion-icon name="aperture-outline" class="icons"></ion-icon></td>
              <td><a href="" class="linkers">SDA CFMS</a></td>
            </tr>
            <tr>
              <td><ion-icon name="bookmarks-outline" class="icons"></ion-icon></ion-icon></td>
              <td colspan="2"><a href="" class="linkers">FAQ</a></td>
            </tr>
            <tr>
              <td><ion-icon name="cloud-done-outline" class="icons"></ion-icon></td>
              <td><a href="https://lakeatts.co.ke/data_privacy.html" class="linkers">Privacy Policy</a></td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>


    <div id="myModal" class="modal">

      <!-- Modal content -->
      <div class="modal-content">
        <div class="modal-header">
          <span class="close">&times;</span>
          <h2 style="margin-top:10px;">Personnel Login</h2>
          <br>
          <hr>
        </div>
        <div class="modal-body">
          <div class="responseDiv3" style="display:none;"></div>
          <table>
            <tbody>
            <form method="post" action="/cfms-web/authenticate/auth-personnel" id="personnelForm">
              <tr>
                <td><input type="hidden" name="phone_number"  th:value="${phone}">
                  <input type="hidden" name="pin"  th:value="${pin}"></td>
              </tr>
              <tr>
                <td colspan="2"><i class="bi bi-telephone" style="float:left;margin-top:9px;font-size:18px;position:absolute;color:black;margin-left:5px;"></i>
                  <input type="text" placeholder="Username" class="login_input" id="username" name="username" style="padding-left:40px;"></td>
              </tr>
              <tr>
                <td colspan="2">
                  <i class="bi bi-lock-fill" style="float:left;font-size:18px;margin-top:9px;position:absolute;color:black;margin-left:5px;"></i>
                  <input type="password" class="password_input" id="password" name="password" placeholder="Password" style="padding-left:40px">
                  <i class="bi bi-eye-slash" id="togglePassword" onclick="passwordVisibility()" style="float:right;margin-top:-27px;font-size:18px;position:relative;color:black;right:3%;"></i>
                </td>
              </tr>
              <tr>
                <td colspan="2"><button class="button" type="button" onclick="personnelLogin()">Personnel Login</button></td>
              </tr>
              <tr>
                <td><br></td>
              </tr>
            </form>
            <tbody>
          </table>
          </div>
          <div id="otp_id_personnel" style="display:none;">
            <h2 style="margin-top:10px;">OTP Verification</h2>
            <hr>
            <input type="hidden" placeholder="Phone Number" maxlength="12" name="username" id="phone_number_otp">
            <table>
              <tr class="otp-field">
                <td id="otp-field13" colspan="2" style="text-align:center;">
                  <input type="text" id="ist1" maxlength="1" onkeyup="clickEvent(this,'sec1')" style="width:10%"/>
                  <input type="text" id="sec1" maxlength="1" onkeyup="clickEvent(this,'third1')"  style="width:10%"/>
                  <input type="text" id="third1" maxlength="1" onkeyup="clickEvent(this,'forth1')"   style="width:10%"/>
                  <input type="text" id="forth1" maxlength="1"  style="width:10%"/>
                </td>
              </tr>
              <tr>
                <td><div id="time1" style="font-size:16px;font-weight: bold;text-align:center;"></div></td>
              </tr>
            </table>
            <table>
              <tr>
                <td  colspan="4">
                  <button type="button" class="button" onclick="confirmPersonnelOTP()" id="verify_otp_button" style="width:100%;">Verify OTP</button></td>
              </tr>
            </table>
          </div>
        </div>
        <div class="modal-footer">

        </div>
      </div>

    </div>
  </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="/cfms-web/js/generate.js"></script>
<script src="/cfms-web/js/form.js"></script>
<script src="/cfms-web/js/giving.js"></script>
<script src="/cfms-web/js/modelled.js"></script>
<script src="/cfms-web/js/form_personnel.js"></script>

<script type="text/javascript">
let toggle = document.querySelector('.toggle');
let navigation = document.querySelector('.navigation');
let main = document.querySelector('.main');

toggle.onclick = function(){
	navigation.classList.toggle('active');
	main.classList.toggle('active');
}

// add hovered class in selected list item
let list = document.querySelectorAll('.navigation li');
	function activeLink(){
	list.forEach((item) =>
		item.classList.remove('hovered'));
		this.classList.add('hovered');
	}
	list.forEach((item) =>
	item.addEventListener('mouseover',activeLink));
</script>
</body>
</html>