<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!--=============== REMIXICONS ===============-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/3.5.0/remixicon.css">

  <!--=============== CSS ===============-->
  <link rel="stylesheet" href="/cfms-web/css/login.css">

  <title>CFMS Web App Login</title>
</head>
<body>
<!--==================== HEADER ====================-->
<header class="header" id="header">
  <nav class="nav container">
    <img src="/cfms-web/images/cfmsLogo.png" class="nav__logo" alt="Logo">

    <div class="nav__menu" id="nav-menu">
      <ul class="nav__list">
        <li class="nav__item">
          <a href="https://lakeatts.co.ke/" class="nav__link">About Us</a>
        </li>

        <li class="nav__item">
          <a href="#" class="nav__link">Services</a>
        </li>

        <li class="nav__item">
          <a href="#" class="nav__link">Contact Us</a>
        </li>
      </ul>

      <!-- Close button -->
      <div class="nav__close" id="nav-close">
        <i class="ri-close-line"></i>
      </div>
    </div>

    <div class="nav__actions">
      <!-- Search button -->

      <ul class="nav__list">
        <li class="nav__item">
          <i class="ri-search-line nav__search" id="search-btn"></i>
        </li>

        <!-- Login button -->
        <li class="nav__item" id="login-btn">
          <a class="nav__link"><i class="ri-user-line nav__login"></i> Login</a>
        </li>
      </ul>

      <!-- Toggle button -->
      <div class="nav__toggle" id="nav-toggle">
        <i class="ri-menu-line"></i>
      </div>
    </div>
  </nav>
</header>

<!--==================== SEARCH ====================-->
<div class="search" id="search">
  <form action="" class="search__form">
    <i class="ri-search-line search__icon"></i>
    <input type="search" placeholder="What are you looking for?" class="search__input">
  </form>

  <i class="ri-close-line search__close" id="search-close"></i>
</div>

<!--==================== LOGIN ====================-->
<div class="login" id="login">
  <div class="login__form">
    <h2 class="login__title">Member Login</h2>
    <br>
    <form id="login_form" action="/cfms-web/authenticate/auth-login" method="post">
        <div class="login__group">
          <div>
            <label for="email" class="login__label">Phone Number</label>
            <i class="ri-phone-line" id="phone-icon1"></i>
            <input type="text" placeholder="2547**" id="username" name="username" class="login__input">
          </div>

          <div>
            <label for="password" class="login__label">Password</label>
            <i class="ri-lock-password-fill" id="pin-icon3"></i>
            <input type="password" placeholder="Enter your Pin" id="password" name="password" class="login__input">
            <i class="ri-eye-fill" id="reset-icon3" onclick="togglePasswordLogin()"></i>
          </div>
        </div>
    </form>

    <div>
      <p class="login__signup">
        You do not have an account? <a href="#register-link" id="register-btn">Sign up as a Member</a>
      </p>
      <br>
      <a href="#forgot-password-link" class="login__forgot" id="reset-pin-btn">
        You forgot your password ?
      </a>

      <button type="button" class="login__button" onclick="AuthMemberRequest()">Log In</button>
    </div>
    <div id="otp_login" style="display:none;">
      <h2 class="login__title" style="margin-top:5px;">OTP Verification</h2>
      <input type="hidden" placeholder="Phone Number" maxlength="12" name="username" id="phone_number_login" disabled>
      <div class="otp-field">
        <div id="otp-field11">
          <input type="text" id="ist" maxlength="1" onkeyup="clickEvent(this,'sec')" style="width:10%" class="login__input1">
          <input type="text" id="sec" maxlength="1" onkeyup="clickEvent(this,'third')" style="width:10%" class="login__input1">
          <input type="text" id="third" maxlength="1" onkeyup="clickEvent(this,'forth')" style="width:10%" class="login__input1">
          <input type="text" id="forth" maxlength="1" style="width:10%" class="login__input1">
        </div>
      </div>
      <div id="time"></div>
      <br>
      <div class="login_buttons">
        <button type="submit" class="login__button" style="display:none;" id="send_otp_button" onclick="sendOTP()">Resend OTP</button>
        <button type="submit" class="login__button" style="width:200%;" id="verify_otp_button" onclick="confirmOTP()">Verify OTP</button>
      </div>
    </div>
  </div>

  <i class="ri-close-line login__close" id="login-close"></i>
</div>


<div class="register" id="register">
  <div class="register__form">
    <div id="otp_register">
      <h2 class="login__title">OTP Verification</h2>
      <br>

      <div class="login__group">
        <div>
          <label for="phone_number_register" class="login__label">Phone Number</label>
          <input type="text" placeholder="2547**" id="phone_number_register" class="login__input">
        </div>
        <div class="otp-field">
          <div id="otp-field12">
            <input type="text" id="ist1" maxlength="1" onkeyup="clickEvent(this,'sec1')" style="width:10%" class="login__input1">
            <input type="text" id="sec1" maxlength="1" onkeyup="clickEvent(this,'third1')" style="width:10%" class="login__input1">
            <input type="text" id="third1" maxlength="1" onkeyup="clickEvent(this,'forth1')" style="width:10%" class="login__input1">
            <input type="text" id="forth1" maxlength="1" style="width:10%" class="login__input1">
          </div>
        </div>
        <div id="time1" style="text-align:center;font-size:16px;color:black;"></div>
        <div class="login_buttons">
          <button type="submit" class="login__button" id="send_otp_register" onclick="sendRegisterOTP()">Send OTP</button>
          <button type="submit" class="login__button" id="confirm_otp_register" onclick="confirmRegisterOTP()">Verify OTP</button>
        </div>

      </div>
    </div>

    <div id="register_div" style="display:none;">
      <h2 class="login__title">Member Registration</h2>
      <br>
      <form action="/cfms-web/authenticate/auth-register" id="form-register" method="post">
        <div class="register_input">
          <div>
            <label for="fullname" class="login__label">Full Name</label>
            <i class="ri-account-circle-fill" id="fullname-icon"></i>
            <input type="text" placeholder="Enter Full Name" class="login__input" id="fullname" name="fullname" required>
          </div>
          <div>
            <label for="phone" class="login__label">Phone Number</label>
            <i class="ri-phone-line" id="phone-icon2"></i>
            <input type="text" placeholder="2547" pattern="[0-9]{12}" minlength="9" maxlength="12" class="login__input" id="phone" name="phone" readonly>
          </div>
        </div>
        <div class="register_input">
          <div>
            <label for="pin" class="login__label">Pin</label>
            <i class="ri-lock-password-fill" id="pin-icon4"></i>
            <input type="password" placeholder="Enter Pin" class="login__input" id="pin" pattern="[0-9]{4}" minlength="4" maxlength="4" name="pin" required>
            <i class="ri-eye-fill" id="reset-icon4" onclick="togglePasswordPinRegister()"></i>
          </div>
          <div>
            <label for="confirm_pin" class="login__label">Confirm Pin</label>
            <i class="ri-lock-password-fill" id="pin-icon5"></i>
            <input type="password" placeholder="Confirm Pin" class="login__input" id="confirm_pin" pattern="[0-9]{4}" minlength="4" maxlength="4" name="pin_confirm" required>
            <i class="ri-eye-fill" id="reset-icon5"  onclick="togglePasswordConfirmPinRegister()"></i>
          </div>
        </div>
        <div class="register_input">
          <div>
            <label for="church_code"  class="login__label">Church Code</label>
            <i class="ri-community-fill" id="church-icon"></i>
            <input type="text" placeholder="Enter Church Code" pattern="[0-9]{10}" minlength="5" maxlength="5" class="login__input" id="church_code" name="church_code" onkeyup="checkChurch()">
          </div>
          <div>
            <label for="email" class="login__label">Email</label>
            <i class="ri-mail-unread-fill"  id="mail-icon"></i>
            <input type="text" placeholder="Enter Email" class="login__input" id="email" name="email">
          </div>
        </div>
      </form>

      <p class="login__signup">
        You have an account? <a href="#login-link" id="login-link">Sign In as a Member</a>
      </p>
      <br>
      <a href="#login-forgot" class="login__forgot" id="reset-pin-btn2">
        You forgot your password ?
      </a>

      <button type="button" class="login__button" onclick="AuthMemberRegister()">Register</button>
    </div>
  </div>
  <i class="ri-close-line register__close" id="register-close"></i>
</div>


<div class="reset-pin" id="reset-pin">
  <div class="reset__pin__form">
    <div id="otp_reset">
      <h2 class="login__title">OTP Verification</h2>
      <br>
      <br>

      <div class="login__group">
        <div>
          <label for="phone_number_reset" class="login__label">Phone Number</label>
          <i class="ri-phone-line" id="phone-icon3"></i>
          <input type="text" placeholder="2547**" id="phone_number_reset" class="login__input">
        </div>
        <div class="otp-field">
          <div id="otp-field13">
            <input type="text" id="ist2" maxlength="1" onkeyup="clickEvent(this,'sec2')" style="width:10%" class="login__input1">
            <input type="text" id="sec2" maxlength="1" onkeyup="clickEvent(this,'third2')" style="width:10%" class="login__input1">
            <input type="text" id="third2" maxlength="1" onkeyup="clickEvent(this,'forth2')" style="width:10%" class="login__input1">
            <input type="text" id="forth2" maxlength="1" style="width:10%" class="login__input1">
          </div>
        </div>
        <div id="time2"></div>
        <div class="login_buttons">
          <button type="submit" class="login__button" id="send-otp-reset" onclick="sendResetOTP()">Send OTP</button>
          <button type="submit" class="login__button" id="verify-otp-reset" onclick="confirmResetOTP()">Verify OTP</button>
        </div>
        <br>
        <p class="login__signup">
          You have an account? <a href="#login-link" id="login-linked">Sign In as a Member</a>
        </p>
        <br>

      </div>
    </div>

    <div id="reset_div" style="display:none;">
      <h2 class="login__title">Reset Pin</h2>
      <br>

      <div>
        <label for="pin" class="login__label">Pin</label>
        <i class="ri-lock-password-fill" id="pin-icon1"></i>
        <input type="password" placeholder="Enter Pin" class="login__input" id="pin_reset" pattern="[0-9]{4}" minlength="4" maxlength="4" name="pin" required>
        <i class="ri-eye-fill" id="reset-icon1"  onclick="togglePasswordPinReset()"></i>
      </div>
      <br>
      <div>
        <label for="confirm_pin" class="login__label">Confirm Pin</label>
        <i class="ri-lock-password-fill" id="pin-icon2"></i>
        <input type="password" placeholder="Confirm Pin" class="login__input" id="confirm_pin_reset" pattern="[0-9]{4}" minlength="4" maxlength="4" name="pin_confirm" required>
        <i class="ri-eye-fill" id="reset-icon2" onclick="togglePasswordConfirmPinReset()"></i>
      </div>
      <br>
      <button type="button" class="login__button"  onclick="resetMemberPin()">Reset Pin</button>
    </div>
  </div>
  <i class="ri-close-line reset__pin__close" id="reset-pin-close"></i>
</div>

<!--==================== MAIN ====================-->
<main class="main">
  <img src="/cfms-web/images/bg-image.png" alt="image" class="main__bg">
</main>

<!--=============== MAIN JS ===============-->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="/cfms-web/js/login.js"></script>
<script src="/cfms-web/js/form.js"></script>
</body>
</html>